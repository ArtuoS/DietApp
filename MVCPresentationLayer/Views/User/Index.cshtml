@using Newtonsoft.Json;
@using Entities.Enums;
@{ ViewData["Title"] = "Index"; }

<div class="wrapper wrapper-content animated fadeInRight">

    <div class="row m-b-lg m-t-lg">
        <div class="col-md-4">

            <div class="profile-image">
                <img src="~/Images/profile.png" class="rounded-circle circle-border m-b-md" alt="profile">
            </div>
            <div class="profile-info">
                <div class="">
                    <div>
                        <h1 class="no-margins" id="userIdentityName">
                            @User.Identity.Name
                        </h1>
                        <p id="userIdentityEmail">
                            @User.FindFirst("Email").Value
                        </p>
                        <a data-toggle="modal" class="btn btn-primary" id="modalUser" href="#modal-form4">Editar Usuário</a>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <h3 class="no-margins">Meta diária de nutrientes:</h3>
            <table class="table small m-b-xs">
                <tbody>
                    <tr>
                        <td>
                            Peso: <strong>@User.FindFirst("Weight").Value<strong>kg</strong></strong>
                        </td>
                        <td>
                            Altura: <strong>@User.FindFirst("Height").Value<strong> cm</strong></strong>
                        </td>
                        <td>
                            Gordura Corporal: <strong>%</strong><strong>@User.FindFirst("BodyFat").Value</strong>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Objetivo: <strong>@User.FindFirst("Objective").Value</strong>
                        </td>
                        <td>
                            Peso ideal: <strong>@User.FindFirst("Weight_Objective").Value</strong>
                        </td>
                        <td>
                            Dias para atingir objetivo: <strong>@User.FindFirst("Days_To_Reach_Goal").Value<strong> dias</strong></strong>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

    <div class="col-md-4">
        <h3 class="no-margins">Meta diária de nutrientes:</h3>
        <table class="table small m-b-xs">
            <tbody>
                <tr>
                    <td class="text-success">
                        <strong class="badge-success">
                            @User.FindFirst("Daily_Calories").Value
                        </strong> de Calorias
                    </td>
                    <td class="text-info">
                        <strong class="badge-info">
                            @User.FindFirst("Daily_Carbohydrates").Value
                        </strong> de Carboidratos
                    </td>

                </tr>
                <tr>
                    <td class="text-warning">
                        <strong class="badge-warning">
                            @User.FindFirst("Daily_Protein").Value
                        </strong>g de Proteínas
                    </td>
                    <td class="text-danger">
                        <strong class="badge-danger">
                            @User.FindFirst("Daily_Fats").Value
                        </strong> de Gorduras
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
    <div class="wrapper wrapper-content">
        <div class="row justify-content-md-center">
            <div class="col-lg-10 col-lg-offset-1">
                <div class="ibox">
                    <h1 class="text-center">Dieta do dia </h1>
                    <div class="row justify-content-md-center">
                        <div class="col-lg-3" id="data_3">
                            <div class="input-group date">
                                <span class="input-group-addon"><i class="fa fa-calendar"></i></span><input type="text" id="dietDate" value="@DateTime.Today.Date.ToString("dd/MM/yyyy")" class="form-control date">
                            </div>
                        </div>
                    </div>
                    <div class="ibox-content">
                        <div class="row">
                            <div class="col-lg-8">
                                <div id="vertical-timeline" class="vertical-container light-timeline no-margins">
                                    <div class="vertical-timeline-block">
                                        <div class="vertical-timeline-icon blue-bg">
                                            <i class="fa fa-coffee"></i>
                                        </div>
                                        <div class="vertical-timeline-content">
                                            <h2>Café da manhã</h2>
                                            <div class="dd-nodrag" id="nestable">
                                                <ol class="dd-list">
                                                    <li class="dd-item" data-id="1">
                                                        <div class="dd-handle">
                                                            <div class="tooltip-demo">
                                                                <a class="text-info" id="nameMealBreackfast">Nome da refeição</a><button data-toggle="modal" id="mod" href="#modal-form" class="btn btn-info btn-xs" data-placement="right"><i class="fa fa-lightbulb-o"></i> Detalhes</button>
                                                            </div>
                                                        </div>
                                                        <ol class="dd-list" id="breackfastmealfoods">
                                                        </ol>
                                                    </li>
                                                </ol>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="vertical-timeline-block">
                                        <div class="vertical-timeline-icon red-bg">
                                            <i class="fa fa-cutlery"></i>
                                        </div>
                                        <div class="vertical-timeline-content">
                                            <h2>Almoço</h2>
                                            <div class="dd-nodrag" id="nestable">
                                                <ol class="dd-list">
                                                    <li class="dd-item" data-id="1">
                                                        <div class="dd-handle">
                                                            <div class="tooltip-demo">
                                                                <a class="text-danger" id="nameMeallunch">Nome da refeição</a><button data-toggle="modal" id="mod" href="#modal-form2" class="btn btn-danger btn-xs" data-placement="right"><i class="fa fa-lightbulb-o"></i> Detalhes</button>
                                                            </div>
                                                        </div>
                                                        <ol class="dd-list" id="lunchmealfoods">
                                                        </ol>
                                                    </li>
                                                </ol>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="vertical-timeline-block">
                                        <div class="vertical-timeline-icon yellow-bg">
                                            <i class="fa fa-glass"></i>
                                        </div>
                                        <div class="vertical-timeline-content">
                                            <h2>Janta</h2>
                                            <div class="dd-nodrag" id="nestable">
                                                <ol class="dd-list">
                                                    <li class="dd-item" data-id="1">
                                                        <div class="dd-handle">
                                                            <div class="tooltip-demo">
                                                                <a class="text-warning" id="nameMealdinner">Nome da refeição</a><button data-toggle="modal" id="mod" href="#modal-form3" class="btn btn-warning btn-xs" data-placement="right"><i class="fa fa-lightbulb-o"></i> Detalhes</button>
                                                            </div>
                                                        </div>
                                                        <ol class="dd-list" id="dinnermealfoods">
                                                        </ol>
                                                    </li>
                                                </ol>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3" id="sidecolumn">
                                <div id="pie"></div>
                                    <div class="ibox">
                                        <div class="ibox-title">
                                            <strong>Mais Informação</strong>
                                            <div class="ibox-tools">
                                                <a class="collapse-link">
                                                    <i class="fa fa-chevron-down"></i>
                                                </a>
                                            </div>
                                        </div>
                                        <div class="ibox-content float-e-margins" style="display: none;">
                                            <ul id="foodsDetails">
                                                <li>Álcool: <strong id="Alcohol"></strong>g</li>
                                                <li>Cobre: <strong id="Copper"></strong>g</li>
                                                <li>Fibra: <strong id="Fiber"></strong>g</li>
                                                <li>Magnesio: <strong id="Magnesium"></strong>g</li>
                                                <li>Fósforo: <strong id="Phosphor"></strong>g</li>
                                                <li>Potássio: <strong id="Potassium"></strong>g</li>
                                                <li>Selenio: <strong id="Selenium"></strong>g</li>
                                                <li>Sódio: <strong id="Sodium"></strong>g</li>
                                                <li>Vitamina A: <strong id="Vitamin_A"></strong>g</li>
                                                <li>Vitamina B12: <strong id="Vitamin_B12"></strong>g</li>
                                                <li>Vitamina B6: <strong id="Vitamin_B6"></strong>g</li>
                                                <li>Vitamina C: <strong id="Vitamin_C"></strong>g</li>
                                                <li>Vitamina D: <strong id="Vitamin_D"></strong>g</li>
                                                <li>Vitamina E: <strong id="Vitamin_E"></strong>g</li>
                                                <li>Zinco: <strong id="Zinc"></strong>g</li>
                                            </ul>
                                        </div>
                                    </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="modal-form" class="modal fade" aria-hidden="true">
        <div class="modal-dialog  modal-md">
            <div class="modal-content">
                <div class="modal-body">
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="row">
                                <div class="col-lg-4">
                                    <img id="mealbreackfastImage" alt="image" class="" src="" style="width: 120px">
                                </div>
                                <div class="col-lg-8">
                                    <h3 id="mealBreackfastName"></h3>
                                    <div class="row">
                                        <div class="col-lg-6">
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <small>Calorias: </small>
                                                    <small id="mealbreackfastCalories"></small>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <small>Carboidratos: </small>
                                                    <small id="mealbreackfastCarbs"></small>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-6">
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <small>Proteínas: </small>
                                                    <small id="mealbreackfastProteins"></small>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <small>Gorduras: </small>
                                                    <small id="mealbreackfastLipids"></small>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-6">
                                    <h4>Ingredientes</h4>
                                    <ul id="mealbrackfastfoods">
                                    </ul>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-12">
                                    <h4>Receita</h4>
                                    <p id="mealBreackfastDescription"></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="modal-form2" class="modal fade" aria-hidden="true">
        <div class="modal-dialog  modal-md">
            <div class="modal-content">
                <div class="modal-body">
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="row">
                                <div class="col-lg-4">
                                    <img id="meallunchImage" alt="image" class="" src="" style="width: 120px">
                                </div>
                                <div class="col-lg-8">
                                    <h3 id="meallunchName"></h3>
                                    <div class="row">
                                        <div class="col-lg-6">
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <small>Calorias: </small>
                                                    <small id="meallunchCalories"></small>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <small>Carboidratos: </small>
                                                    <small id="meallunchCarbs"></small>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-6">
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <small>Proteínas: </small>
                                                    <small id="meallunchProteins"></small>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <small>Gorduras: </small>
                                                    <small id="meallunchLipids"></small>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-6">
                                    <h4>Ingredientes</h4>
                                    <ul id="meallunchfoods">
                                    </ul>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-12">
                                    <h4>Receita</h4>
                                    <p id="meallunchDescription"></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="modal-form3" class="modal fade" aria-hidden="true">
        <div class="modal-dialog  modal-md">
            <div class="modal-content">
                <div class="modal-body">
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="row">
                                <div class="col-lg-4">
                                    <img id="mealdinnerImage" alt="image" class="" src="" style="width: 120px">
                                </div>
                                <div class="col-lg-8">
                                    <h3 id="mealdinnerName"></h3>
                                    <div class="row">
                                        <div class="col-lg-6">
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <small>Calorias: </small>
                                                    <small id="mealdinnerCalories"></small>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <small>Carboidratos: </small>
                                                    <small id="mealdinnerCarbs"></small>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-6">
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <small>Proteínas: </small>
                                                    <small id="mealdinnerProteins"></small>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <small>Gorduras: </small>
                                                    <small id="mealdinnerLipids"></small>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-6">
                                    <h4>Ingredientes</h4>
                                    <ul id="mealdinnerfoods">
                                    </ul>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-12">
                                    <h4>Receita</h4>
                                    <p id="mealdinnerDescription"></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="modal-form4" class="modal fade" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-body">
                    <form role="form">
                        <h3>
                            Editar Usuario ID:
                            <label name="IDUser" id="IDUser">@User.FindFirst("ID").Value</label>
                        </h3>
                        <div class="row">
                            <div class="col-sm-6 b-r">
                                <div class="form-group">
                                    <label name="First_Name" class="col-sm-2 col-form-label">Nome</label> <input name="First_Name" id="First_Name" type="text" value="" class="form-control">
                                </div>
                                <span class="text-danger"></span>
                                <div class="form-group">
                                    <label name="Last_Name" class="col-sm-2 col-form-label">Sobrenome</label> <input name="Last_Name" id="Last_Name" type="text" value="" class="form-control">
                                </div>
                                <span class="text-danger"></span>

                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label name="Email" class="col-sm-2 col-form-label">Email</label><input name="Email" type="email" id="Email" class="form-control">
                                </div>
                                <span class="text-danger"></span>
                                <div class="form-group">
                                    <label name="Password" class="col-sm-2 col-form-label">Senha</label><input name="Password" type="password" id="Password" class="form-control">
                                </div>
                                <span class="text-danger"></span>
                                <div class="form-group">
                                    <button id="btnUpdate" class="btn btn-sm-10 btn-primary" type="submit"><strong>Atualizar</strong></button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

@section Styles {
    <environment names="Development,Staging,Production">
        <link rel="stylesheet" href="~/lib/slick-carousel/slick/slick.css" />
        <link rel="stylesheet" href="~/lib/slick-carousel/slick/slick-theme.css" />
        <link rel="stylesheet" href="~/lib/c3/c3.min.css" />
        <link rel="stylesheet" href="~/lib/daterangepicker/daterangepicker-bs3.css" />
        <link rel="stylesheet" href="~/lib/bootstrap-datepicker/dist/css/bootstrap-datepicker3.css" />
        <link rel="stylesheet" href="~/lib/bootstrap-datepicker/dist/css/bootstrap-datepicker3.min.css" />
    </environment>
}

@section Scripts {
    <environment names="Development,Staging,Production">
        <script src="~/lib/daterangepicker/daterangepicker.js"></script>
        <script src="~/lib/bootstrap-datepicker/dist/js/bootstrap-datepicker.js"></script>
        <script src="~/lib/sparkline/jquery.sparkline.min.js"></script>
        <script src="~/lib/slick-carousel/slick/slick.js"></script>
        <script src="~/lib/slick-carousel/slick/slick.min.js"></script>
        <script src="~/lib/nestable/jquery.nestable.js"></script>
        <script src="~/lib/c3/c3.js"></script>
        <script src="~/lib/d3/d3.min.js"></script>


    </environment>

    <script type="text/javascript">
        $(document).ready(function () {

            

            $('.dd-nodrag').nestable('collapseAll');

            $('.dd-nodrag').nestable({
                collapsedClass: 'dd-collapsed',
                group: 1
            }).nestable('collapseAll');

            $('#data_3 .input-group.date').datepicker({
                startView: 2,
                format: 'dd/mm/yyyy',
                language: 'pt-BR',
                todayBtn: "linked",
                keyboardNavigation: false,
                forceParse: false,
                autoclose: true
            });

            $('input[name="daterange"]').daterangepicker();

            $('#reportrange span').html(moment().subtract(29, 'days').format('dd MMMM yyyy') + ' - ' + moment().format('dd MMMM yyyy'));



        });
    </script>

    <script type="text/javascript">
        $(document).ready(function () {
            $('.lastNameIdnt').css('visibility', 'hidden');

            $("#sparkline1").sparkline([34, 43, 43, 35, 44, 32, 44, 48], {
                type: 'line',
                width: '100%',
                height: '50',
                lineColor: '#1ab394',
                fillColor: "transparent"
            });

        });
    </script>

    <script>
        $("#modalUser").click(function (e) {
            $("#First_Name").val($("#userIdentityName").html().replace(/\s+/, ""));
            $("#Email").val($("#userIdentityEmail").html().replace(/\s+/, ""));
            $("#Last_Name").val($("#userIdentityLastName").html().replace(/\s+/, ""));
            $("#IDUser").val($("#IDUser").html().replace(/\s+/, ""));
        });

        $("#btnUpdate").click(function (e) {
            tr = $(this).parent().parent();
            var user = new Object();
            user.First_Name = $("#First_Name").val();
            user.Email = $("#Email").val();
            user.Last_Name = $("#Last_Name").val();
            user.ID = $("#IDUser").val();
            $.ajax({
                method: "POST",
                url: "/User/Update/",
                data: JSON.stringify(user),
                contentType: "application/json",
                dataType: "json",
                traditional: true,
                success: function (response) {
                    if (response.DeuBoa) {
                        $('#respostaServidor').html("Cadastro efetuado com sucesso!")
                        $('#respostaServidor').css({ "color": "green" });
                    }
                    else {
                        $('#respostaServidor').html(response.Erro);
                        $('#respostaServidor').css({ "color": "red" });
                    }
                },
                failure: function (response) {
                    alert("Falha na comunicação com o servidor.");
                },
                error: function (response) {
                }
            });
            e.preventDefault();
        });
    </script>

    <script>
        $(document).ready(function () {
            var Alcohol = 0;
            var Calories = 0;
            var Carbohydrate = 0;
            var Copper = 0;
            var Fiber = 0;
            var Lipid = 0;
            var Magnesium = 0;
            var Phosphor = 0;
            var Potassium = 0;
            var Protein = 0;
            var Selenium = 0;
            var Sodium = 0;
            var Vitamin_A = 0;
            var Vitamin_B12 = 0;
            var Vitamin_B6 = 0;
            var Vitamin_C = 0;
            var Vitamin_D = 0;
            var Vitamin_E = 0;
            var Zinc = 0;
            var date = $("#dietDate").val();
            const myNode = document.getElementById("breackfastmealfoods");
            myNode.innerHTML = '';
            const myNodeb = document.getElementById("mealbrackfastfoods");
            myNodeb.innerHTML = '';
            var units = ['kcal', 'g', 'L', 'ml', 'kg', 'mg', 'µg'];
            $.ajax({
                method: "GET",
                url: "/Diet/GetByDate/",
                contentType: "application/json",
                dataType: "json",
                traditional: true,
                //data: JSON.stringify({ "date": date }),
                data: {
                    'date': JSON.stringify(date)
                },
                success: function (data) {
                    if (data == null) {
                        var id = @User.FindFirst("ID").Value.ToString();
                        $.ajax({
                            method: "GET",
                            url: "/Diet/GenerateDiet/",
                            contentType: "application/json",
                            dataType: "json",
                            traditional: true,
                            data: {
                                'date': JSON.stringify(date),
                                'id': JSON.stringify(id)
                            },
                            success: function (data1) {
                                for (var i = 0; i < data1.length; i++) {
                                    $.ajax({
                                        method: "GET",
                                        url: "/Diet/GetFoodsDataByMealId/" + data1[i],
                                        contentType: "application/json",
                                        dataType: "json",
                                        traditional: true,
                                        success: function (data6) {
                                            Alcohol = Alcohol + data6.alcohol;
                                            Calories = Calories + data6.calories;
                                            Carbohydrate = Carbohydrate + data6.carbohydrate;
                                            Copper = Copper + data6.copper;
                                            Fiber = Fiber + data6.fiber;
                                            Lipid = Lipid + data6.lipid;
                                            Magnesium = Magnesium + data6.magnesium;
                                            Phosphor = Phosphor + data6.phosphor;
                                            Potassium = Potassium + data6.potassium;
                                            Protein = Protein + data6.protein;
                                            Selenium = Selenium + data6.selenium;
                                            Sodium = Sodium + data6.sodium;
                                            Vitamin_A = Vitamin_A + data6.vitamin_A;
                                            Vitamin_B12 = Vitamin_B12 + data6.vitamin_B12;
                                            Vitamin_B6 = Vitamin_B6 + data6.vitamin_B6;
                                            Vitamin_C = Vitamin_C + data6.vitamin_C;
                                            Vitamin_D = Vitamin_D + data6.vitamin_D;
                                            Vitamin_E = Vitamin_E + data6.vitamin_E;
                                            Zinc = Zinc + data6.zinc;

                                            document.getElementById("Alcohol").innerHTML = Alcohol;
                                            document.getElementById("Copper").innerHTML = Copper;
                                            document.getElementById("Fiber").innerHTML = Fiber;
                                            document.getElementById("Magnesium").innerHTML = Magnesium;
                                            document.getElementById("Phosphor").innerHTML = Phosphor;
                                            document.getElementById("Potassium").innerHTML = Potassium;
                                            document.getElementById("Selenium").innerHTML = Selenium;
                                            document.getElementById("Sodium").innerHTML = Sodium;
                                            document.getElementById("Vitamin_A").innerHTML = Vitamin_A;
                                            document.getElementById("Vitamin_B12").innerHTML = Vitamin_B12;
                                            document.getElementById("Vitamin_B6").innerHTML = Vitamin_B6;
                                            document.getElementById("Vitamin_C").innerHTML = Vitamin_C;
                                            document.getElementById("Vitamin_D").innerHTML = Vitamin_D;
                                            document.getElementById("Vitamin_E").innerHTML = Vitamin_E;
                                            document.getElementById("Zinc").innerHTML = Zinc;

                                            c3.generate({
                                                bindto: '#pie',
                                                data: {
                                                    columns: [
                                                        //['Calorias', 200]],
                                                        ['Carboidratos', Carbohydrate],
                                                        ['Proteínas', Protein],
                                                        ['Gorduras', Lipid]
                                                    ],
                                                    colors: {
                                                        //data1: '#0000FF',
                                                        data2: '#f0d500',
                                                        data3: '#42ccce',
                                                        data4: '#eed202'
                                                    },
                                                    type: 'pie'
                                                }
                                            });
                                        },
                                        failure: function (response) {
                                            alert("Falha na comunicação com o servidor.");
                                        },
                                        error: function (response) {
                                            alert("Erro");
                                        }
                                    });
                                    $.ajax({
                                        method: "GET",
                                        url: "/Meal/GetById/" + data1[i],
                                        contentType: "application/json",
                                        dataType: "json",
                                        traditional: true,
                                        success: function (data2) {
                                            if (data2.category == 0) {
                                                document.getElementById('nameMealBreackfast').innerHTML = data2.name;
                                                document.getElementById('mealBreackfastName').innerHTML = data2.name;
                                                document.getElementById('mealBreackfastDescription').innerHTML = data2.description;
                                                document.getElementById('mealbreackfastImage').src = "../img/refeicao/" + data2.id + ".jpg";
                                                document.getElementById('mealbreackfastCalories').innerHTML = data2.total_Calories;
                                                document.getElementById('mealbreackfastCarbs').innerHTML = data2.total_Carbohydrates;
                                                document.getElementById('mealbreackfastProteins').innerHTML = data2.total_Proteins;
                                                document.getElementById('mealbreackfastLipids').innerHTML = data2.total_Lipids;
                                                $.ajax({
                                                    method: "GET",
                                                    url: "/Meal/GetMealFoodsById/" + data2.id,
                                                    contentType: "application/json",
                                                    dataType: "json",
                                                    traditional: true,
                                                    success: function (data3) {
                                                        for (var i = 0; i < data3.length; i++) {
                                                            var food = data3[i];
                                                            $.ajax({
                                                                method: "GET",
                                                                url: "/Meal/GetFoodById/" + data3[i].foodID,
                                                                contentType: "application/json",
                                                                dataType: "json",
                                                                traditional: true,
                                                                success: function (data4) {
                                                                    var a = '<li class="dd-item" data-id="2"><div class="dd-handle"><span class="float-right">' + food.quantity + units[data4.unit] + ' </span><span>' + data4.food_Name + '</span></div></li>';
                                                                    var b = '<li>' + data4.food_Name + '<span class="float-right">' + food.quantity + units[data4.unit] + ' </span></li>';
                                                                    $("#breackfastmealfoods").append(a);
                                                                    $("#mealbrackfastfoods").append(b);
                                                                },
                                                                failure: function (response) {
                                                                    alert("Falha na comunicação com o servidor.");
                                                                },
                                                                error: function (response) {
                                                                }
                                                            });
                                                        }
                                                    },
                                                    failure: function (response) {
                                                        alert("Falha na comunicação com o servidor.");
                                                    },
                                                    error: function (response) {
                                                    }
                                                });
                                            }

                                            else if (data2.category == 1) {
                                                document.getElementById('nameMeallunch').innerHTML = data2.name;
                                                document.getElementById('meallunchName').innerHTML = data2.name;
                                                document.getElementById('meallunchDescription').innerHTML = data2.description;
                                                document.getElementById('meallunchImage').src = "../img/refeicao/" + data2.id + ".jpg";
                                                document.getElementById('meallunchCalories').innerHTML = data2.total_Calories;
                                                document.getElementById('meallunchCarbs').innerHTML = data2.total_Carbohydrates;
                                                document.getElementById('meallunchProteins').innerHTML = data2.total_Proteins;
                                                document.getElementById('meallunchLipids').innerHTML = data2.total_Lipids;
                                                $.ajax({
                                                    method: "GET",
                                                    url: "/Meal/GetMealFoodsById/" + data2.id,
                                                    contentType: "application/json",
                                                    dataType: "json",
                                                    traditional: true,
                                                    success: function (data3) {
                                                        for (var i = 0; i < data3.length; i++) {
                                                            var food = data3[i];
                                                            $.ajax({
                                                                method: "GET",
                                                                url: "/Meal/GetFoodById/" + data3[i].foodID,
                                                                contentType: "application/json",
                                                                dataType: "json",
                                                                traditional: true,
                                                                success: function (data4) {
                                                                    var a = '<li class="dd-item" data-id="2"><div class="dd-handle"><span class="float-right">' + food.quantity + units[data4.unit] + ' </span><span>' + data4.food_Name + '</span></div></li>';
                                                                    var b = '<li>' + data4.food_Name + '<span class="float-right">' + food.quantity + units[data4.unit] + ' </span></li>';
                                                                    $("#lunchmealfoods").append(a);
                                                                    $("#meallunchfoods").append(b);
                                                                },
                                                                failure: function (response) {
                                                                    alert("Falha na comunicação com o servidor.");
                                                                },
                                                                error: function (response) {
                                                                }
                                                            });
                                                        }
                                                    },
                                                    failure: function (response) {
                                                        alert("Falha na comunicação com o servidor.");
                                                    },
                                                    error: function (response) {
                                                    }
                                                });
                                            }

                                            else if (data2.category == 2) {
                                                document.getElementById('nameMealdinner').innerHTML = data2.name;
                                                document.getElementById('mealdinnerName').innerHTML = data2.name;
                                                document.getElementById('mealdinnerDescription').innerHTML = data2.description;
                                                document.getElementById('mealdinnerImage').src = "../img/refeicao/" + data2.id + ".jpg";
                                                document.getElementById('mealdinnerCalories').innerHTML = data2.total_Calories;
                                                document.getElementById('mealdinnerCarbs').innerHTML = data2.total_Carbohydrates;
                                                document.getElementById('mealdinnerProteins').innerHTML = data2.total_Proteins;
                                                document.getElementById('mealdinnerLipids').innerHTML = data2.total_Lipids;
                                                $.ajax({
                                                    method: "GET",
                                                    url: "/Meal/GetMealFoodsById/" + data2.id,
                                                    contentType: "application/json",
                                                    dataType: "json",
                                                    traditional: true,
                                                    success: function (data3) {
                                                        for (var i = 0; i < data3.length; i++) {
                                                            var food = data3[i];
                                                            $.ajax({
                                                                method: "GET",
                                                                url: "/Meal/GetFoodById/" + data3[i].foodID,
                                                                contentType: "application/json",
                                                                dataType: "json",
                                                                traditional: true,
                                                                success: function (data4) {
                                                                    var a = '<li class="dd-item" data-id="2"><div class="dd-handle"><span class="float-right">' + food.quantity + units[data4.unit] + ' </span><span>' + data4.food_Name + '</span></div></li>';
                                                                    var b = '<li>' + data4.food_Name + '<span class="float-right">' + food.quantity + units[data4.unit] + ' </span></li>';
                                                                    $("#dinnermealfoods").append(a);
                                                                    $("#mealdinnerfoods").append(b);
                                                                },
                                                                failure: function (response) {
                                                                    alert("Falha na comunicação com o servidor.");
                                                                },
                                                                error: function (response) {
                                                                }
                                                            });
                                                        }
                                                    },
                                                    failure: function (response) {
                                                        alert("Falha na comunicação com o servidor.");
                                                    },
                                                    error: function (response) {
                                                    }
                                                });

                                            }

                                        },
                                        failure: function (response) {
                                            alert("Falha na comunicação com o servidor.");
                                        },
                                        error: function (response) {
                                        }
                                    });

                                }

                            },
                            failure: function (data2) {
                                alert("Falha na comunicação com o servidor.");
                            },
                            error: function (data2) {
                                alert(':(');
                            }
                        });
                    }
                    else if (data != null) {
                        for (var i = 0; i < data.length; i++) {
                            $.ajax({
                                method: "GET",
                                url: "/Diet/GetFoodsDataByMealId/" + data[i],
                                contentType: "application/json",
                                dataType: "json",
                                traditional: true,
                                success: function (data6) {
                                    Alcohol = Alcohol + data6.alcohol;
                                    Calories = Calories + data6.calories;
                                    Carbohydrate = Carbohydrate + data6.carbohydrate;
                                    Copper = Copper + data6.copper;
                                    Fiber = Fiber + data6.fiber;
                                    Lipid = Lipid + data6.lipid;
                                    Magnesium = Magnesium + data6.magnesium;
                                    Phosphor = Phosphor + data6.phosphor;
                                    Potassium = Potassium + data6.potassium;
                                    Protein = Protein + data6.protein;
                                    Selenium = Selenium + data6.selenium;
                                    Sodium = Sodium + data6.sodium;
                                    Vitamin_A = Vitamin_A + data6.vitamin_A;
                                    Vitamin_B12 = Vitamin_B12 + data6.vitamin_B12;
                                    Vitamin_B6 = Vitamin_B6 + data6.vitamin_B6;
                                    Vitamin_C = Vitamin_C + data6.vitamin_C;
                                    Vitamin_D = Vitamin_D + data6.vitamin_D;
                                    Vitamin_E = Vitamin_E + data6.vitamin_E;
                                    Zinc = Zinc + data6.zinc;

                                    document.getElementById("Alcohol").innerHTML = Alcohol;
                                    document.getElementById("Copper").innerHTML = Copper;
                                    document.getElementById("Fiber").innerHTML = Fiber;
                                    document.getElementById("Magnesium").innerHTML = Magnesium;
                                    document.getElementById("Phosphor").innerHTML = Phosphor;
                                    document.getElementById("Potassium").innerHTML = Potassium;
                                    document.getElementById("Selenium").innerHTML = Selenium;
                                    document.getElementById("Sodium").innerHTML = Sodium;
                                    document.getElementById("Vitamin_A").innerHTML = Vitamin_A;
                                    document.getElementById("Vitamin_B12").innerHTML = Vitamin_B12;
                                    document.getElementById("Vitamin_B6").innerHTML = Vitamin_B6;
                                    document.getElementById("Vitamin_C").innerHTML = Vitamin_C;
                                    document.getElementById("Vitamin_D").innerHTML = Vitamin_D;
                                    document.getElementById("Vitamin_E").innerHTML = Vitamin_E;
                                    document.getElementById("Zinc").innerHTML = Zinc;

                                    c3.generate({
                                        bindto: '#pie',
                                        data: {
                                            columns: [
                                                //['Calorias', 200]],
                                                ['Carboidratos', Carbohydrate],
                                                ['Proteínas', Protein],
                                                ['Gorduras', Lipid]
                                            ],
                                            colors: {
                                                //data1: '#0000FF',
                                                data2: '#f0d500',
                                                data3: '#42ccce',
                                                data4: '#eed202'
                                            },
                                            type: 'pie'
                                        }
                                    });
                                },
                                failure: function (response) {
                                    alert("Falha na comunicação com o servidor.");
                                },
                                error: function (response) {
                                    alert("Erro");
                                }
                            });
                            $.ajax({
                                method: "GET",
                                url: "/Meal/GetById/" + data[i],
                                contentType: "application/json",
                                dataType: "json",
                                traditional: true,
                                success: function (data2) {
                                    if (data2.category == 0) {
                                        document.getElementById('nameMealBreackfast').innerHTML = data2.name;
                                        document.getElementById('mealBreackfastName').innerHTML = data2.name;
                                        document.getElementById('mealBreackfastDescription').innerHTML = data2.description;
                                        document.getElementById('mealbreackfastImage').src = "../img/refeicao/" + data2.id + ".jpg";
                                        document.getElementById('mealbreackfastCalories').innerHTML = data2.total_Calories;
                                        document.getElementById('mealbreackfastCarbs').innerHTML = data2.total_Carbohydrates;
                                        document.getElementById('mealbreackfastProteins').innerHTML = data2.total_Proteins;
                                        document.getElementById('mealbreackfastLipids').innerHTML = data2.total_Lipids;
                                        $.ajax({
                                            method: "GET",
                                            url: "/Meal/GetMealFoodsById/" + data2.id,
                                            contentType: "application/json",
                                            dataType: "json",
                                            traditional: true,
                                            success: function (data3) {
                                                for (var i = 0; i < data3.length; i++) {
                                                    var food = data3[i];
                                                    $.ajax({
                                                        method: "GET",
                                                        url: "/Meal/GetFoodById/" + data3[i].foodID,
                                                        contentType: "application/json",
                                                        dataType: "json",
                                                        traditional: true,
                                                        success: function (data4) {

                                                            var a = '<li class="dd-item" data-id="2"><div class="dd-handle"><span class="float-right">' + food.quantity + units[data4.unit] + ' </span><span>' + data4.food_Name + '</span></div></li>';
                                                            var b = '<li>' + data4.food_Name + '<span class="float-right">' + food.quantity + units[data4.unit] + ' </span></li>';
                                                            $("#breackfastmealfoods").append(a);
                                                            $("#mealbrackfastfoods").append(b);
                                                        },
                                                        failure: function (response) {
                                                            alert("Falha na comunicação com o servidor.");
                                                        },
                                                        error: function (response) {
                                                        }
                                                    });
                                                }
                                            },
                                            failure: function (response) {
                                                alert("Falha na comunicação com o servidor.");
                                            },
                                            error: function (response) {
                                            }
                                        });
                                    }

                                    else if (data2.category == 1) {
                                        document.getElementById('nameMeallunch').innerHTML = data2.name;
                                        document.getElementById('meallunchName').innerHTML = data2.name;
                                        document.getElementById('meallunchDescription').innerHTML = data2.description;
                                        document.getElementById('meallunchImage').src = "../img/refeicao/" + data2.id + ".jpg";
                                        document.getElementById('meallunchCalories').innerHTML = data2.total_Calories;
                                        document.getElementById('meallunchCarbs').innerHTML = data2.total_Carbohydrates;
                                        document.getElementById('meallunchProteins').innerHTML = data2.total_Proteins;
                                        document.getElementById('meallunchLipids').innerHTML = data2.total_Lipids;
                                        $.ajax({
                                            method: "GET",
                                            url: "/Meal/GetMealFoodsById/" + data2.id,
                                            contentType: "application/json",
                                            dataType: "json",
                                            traditional: true,
                                            success: function (data3) {
                                                for (var i = 0; i < data3.length; i++) {
                                                    var food = data3[i];
                                                    $.ajax({
                                                        method: "GET",
                                                        url: "/Meal/GetFoodById/" + data3[i].foodID,
                                                        contentType: "application/json",
                                                        dataType: "json",
                                                        traditional: true,
                                                        success: function (data4) {
                                                            var a = '<li class="dd-item" data-id="2"><div class="dd-handle"><span class="float-right">' + food.quantity + units[data4.unit] + ' </span><span>' + data4.food_Name + '</span></div></li>';
                                                            var b = '<li>' + data4.food_Name + '<span class="float-right">' + food.quantity + units[data4.unit] + ' </span></li>';
                                                            $("#lunchmealfoods").append(a);
                                                            $("#meallunchfoods").append(b);
                                                        },
                                                        failure: function (response) {
                                                            alert("Falha na comunicação com o servidor.");
                                                        },
                                                        error: function (response) {
                                                        }
                                                    });
                                                }
                                            },
                                            failure: function (response) {
                                                alert("Falha na comunicação com o servidor.");
                                            },
                                            error: function (response) {
                                            }
                                        });
                                    }

                                    else if (data2.category == 2) {
                                        document.getElementById('nameMealdinner').innerHTML = data2.name;
                                        document.getElementById('mealdinnerName').innerHTML = data2.name;
                                        document.getElementById('mealdinnerDescription').innerHTML = data2.description;
                                        document.getElementById('mealdinnerImage').src = "../img/refeicao/" + data2.id + ".jpg";
                                        document.getElementById('mealdinnerCalories').innerHTML = data2.total_Calories;
                                        document.getElementById('mealdinnerCarbs').innerHTML = data2.total_Carbohydrates;
                                        document.getElementById('mealdinnerProteins').innerHTML = data2.total_Proteins;
                                        document.getElementById('mealdinnerLipids').innerHTML = data2.total_Lipids;
                                        $.ajax({
                                            method: "GET",
                                            url: "/Meal/GetMealFoodsById/" + data2.id,
                                            contentType: "application/json",
                                            dataType: "json",
                                            traditional: true,
                                            success: function (data3) {
                                                for (var i = 0; i < data3.length; i++) {
                                                    var food = data3[i];
                                                    $.ajax({
                                                        method: "GET",
                                                        url: "/Meal/GetFoodById/" + data3[i].foodID,
                                                        contentType: "application/json",
                                                        dataType: "json",
                                                        traditional: true,
                                                        success: function (data4) {
                                                            var a = '<li class="dd-item" data-id="2"><div class="dd-handle"><span class="float-right">' + food.quantity + units[data4.unit] + ' </span><span>' + data4.food_Name + '</span></div></li>';
                                                            var b = '<li>' + data4.food_Name + '<span class="float-right">' + food.quantity + units[data4.unit] + ' </span></li>';
                                                            $("#dinnermealfoods").append(a);
                                                            $("#mealdinnerfoods").append(b);
                                                        },
                                                        failure: function (response) {
                                                            alert("Falha na comunicação com o servidor.");
                                                        },
                                                        error: function (response) {
                                                        }
                                                    });
                                                }
                                            },
                                            failure: function (response) {
                                                alert("Falha na comunicação com o servidor.");
                                            },
                                            error: function (response) {
                                            }
                                        });

                                    }


                                },
                                failure: function (response) {
                                    alert("Falha na comunicação com o servidor.");
                                },
                                error: function (response) {
                                }

                            });

                        }

                    }
                },
                failure: function (response) {
                    alert("Falha na comunicação com o servidor.");
                },
                error: function (response) {
                }
            });
        });


        $("#dietDate").change(function () {
            var Alcohol = 0;
            var Calories = 0;
            var Carbohydrate = 0;
            var Copper = 0;
            var Fiber = 0;
            var Lipid = 0;
            var Magnesium = 0;
            var Phosphor = 0;
            var Potassium = 0;
            var Protein = 0;
            var Selenium = 0;
            var Sodium = 0;
            var Vitamin_A = 0;
            var Vitamin_B12 = 0;
            var Vitamin_B6 = 0;
            var Vitamin_C = 0;
            var Vitamin_D = 0;
            var Vitamin_E = 0;
            var Zinc = 0;
            var date = $("#dietDate").val();
            const myNode = document.getElementById("breackfastmealfoods");
            myNode.innerHTML = '';
            const myNodeb = document.getElementById("mealbrackfastfoods");
            myNodeb.innerHTML = '';
            const myNodec = document.getElementById("lunchmealfoods");
            myNodec.innerHTML = '';
            const myNoded = document.getElementById("meallunchfoods");
            myNoded.innerHTML = '';
            const myNodee = document.getElementById("dinnermealfoods");
            myNodee.innerHTML = '';
            const myNodef = document.getElementById("mealdinnerfoods");
            myNodef.innerHTML = '';
            var units = ['kcal', 'g', 'L', 'ml', 'kg', 'mg', 'µg'];
            $.ajax({
                method: "GET",
                url: "/Diet/GetByDate/",
                contentType: "application/json",
                dataType: "json",
                traditional: true,
                //data: JSON.stringify({ "date": date }),
                data: {
                    'date': JSON.stringify(date)
                },
                success: function (data) {
                    if (data == null) {
                        var id = @User.FindFirst("ID").Value.ToString();
                        $.ajax({
                            method: "GET",
                            url: "/Diet/GenerateDiet/",
                            contentType: "application/json",
                            dataType: "json",
                            traditional: true,
                            data: {
                                'date': JSON.stringify(date),
                                'id': JSON.stringify(id)
                            },
                            success: function (data1) {
                                for (var i = 0; i < data1.length; i++) {
                                    $.ajax({
                                        method: "GET",
                                        url: "/Diet/GetFoodsDataByMealId/" + data1[i],
                                        contentType: "application/json",
                                        dataType: "json",
                                        traditional: true,
                                        success: function (data6) {
                                            Alcohol = Alcohol + data6.alcohol;
                                            Calories = Calories + data6.calories;
                                            Carbohydrate = Carbohydrate + data6.carbohydrate;
                                            Copper = Copper + data6.copper;
                                            Fiber = Fiber + data6.fiber;
                                            Lipid = Lipid + data6.lipid;
                                            Magnesium = Magnesium + data6.magnesium;
                                            Phosphor = Phosphor + data6.phosphor;
                                            Potassium = Potassium + data6.potassium;
                                            Protein = Protein + data6.protein;
                                            Selenium = Selenium + data6.selenium;
                                            Sodium = Sodium + data6.sodium;
                                            Vitamin_A = Vitamin_A + data6.vitamin_A;
                                            Vitamin_B12 = Vitamin_B12 + data6.vitamin_B12;
                                            Vitamin_B6 = Vitamin_B6 + data6.vitamin_B6;
                                            Vitamin_C = Vitamin_C + data6.vitamin_C;
                                            Vitamin_D = Vitamin_D + data6.vitamin_D;
                                            Vitamin_E = Vitamin_E + data6.vitamin_E;
                                            Zinc = Zinc + data6.zinc;

                                            document.getElementById("Alcohol").innerHTML = Alcohol;
                                            document.getElementById("Copper").innerHTML = Copper;
                                            document.getElementById("Fiber").innerHTML = Fiber;
                                            document.getElementById("Magnesium").innerHTML = Magnesium;
                                            document.getElementById("Phosphor").innerHTML = Phosphor;
                                            document.getElementById("Potassium").innerHTML = Potassium;
                                            document.getElementById("Selenium").innerHTML = Selenium;
                                            document.getElementById("Sodium").innerHTML = Sodium;
                                            document.getElementById("Vitamin_A").innerHTML = Vitamin_A;
                                            document.getElementById("Vitamin_B12").innerHTML = Vitamin_B12;
                                            document.getElementById("Vitamin_B6").innerHTML = Vitamin_B6;
                                            document.getElementById("Vitamin_C").innerHTML = Vitamin_C;
                                            document.getElementById("Vitamin_D").innerHTML = Vitamin_D;
                                            document.getElementById("Vitamin_E").innerHTML = Vitamin_E;
                                            document.getElementById("Zinc").innerHTML = Zinc;

                                            c3.generate({
                                                bindto: '#pie',
                                                data: {
                                                    columns: [
                                                        //['Calorias', 200]],
                                                        ['Carboidratos', Carbohydrate],
                                                        ['Proteínas', Protein],
                                                        ['Gorduras', Lipid]
                                                    ],
                                                    colors: {
                                                        //data1: '#0000FF',
                                                        data2: '#f0d500',
                                                        data3: '#42ccce',
                                                        data4: '#eed202'
                                                    },
                                                    type: 'pie'
                                                }
                                            });
                                        },
                                        failure: function (response) {
                                            alert("Falha na comunicação com o servidor.");
                                        },
                                        error: function (response) {
                                            alert("Erro");
                                        }
                                    });
                                    $.ajax({
                                        method: "GET",
                                        url: "/Meal/GetById/" + data1[i],
                                        contentType: "application/json",
                                        dataType: "json",
                                        traditional: true,
                                        success: function (data2) {
                                            if (data2.category == 0) {
                                                document.getElementById('nameMealBreackfast').innerHTML = data2.name;
                                                document.getElementById('mealBreackfastName').innerHTML = data2.name;
                                                document.getElementById('mealBreackfastDescription').innerHTML = data2.description;
                                                document.getElementById('mealbreackfastImage').src = "../img/refeicao/" + data2.id + ".jpg";
                                                document.getElementById('mealbreackfastCalories').innerHTML = data2.total_Calories;
                                                document.getElementById('mealbreackfastCarbs').innerHTML = data2.total_Carbohydrates;
                                                document.getElementById('mealbreackfastProteins').innerHTML = data2.total_Proteins;
                                                document.getElementById('mealbreackfastLipids').innerHTML = data2.total_Lipids;
                                                $.ajax({
                                                    method: "GET",
                                                    url: "/Meal/GetMealFoodsById/" + data2.id,
                                                    contentType: "application/json",
                                                    dataType: "json",
                                                    traditional: true,
                                                    success: function (data3) {
                                                        for (var i = 0; i < data3.length; i++) {
                                                            var food = data3[i];
                                                            $.ajax({
                                                                method: "GET",
                                                                url: "/Meal/GetFoodById/" + data3[i].foodID,
                                                                contentType: "application/json",
                                                                dataType: "json",
                                                                traditional: true,
                                                                success: function (data4) {
                                                                    var a = '<li class="dd-item" data-id="2"><div class="dd-handle"><span class="float-right">' + food.quantity + units[data4.unit] + ' </span><span>' + data4.food_Name + '</span></div></li>';
                                                                    var b = '<li>' + data4.food_Name + '<span class="float-right">' + food.quantity + units[data4.unit] + ' </span></li>';
                                                                    $("#breackfastmealfoods").append(a);
                                                                    $("#mealbrackfastfoods").append(b);
                                                                },
                                                                failure: function (response) {
                                                                    alert("Falha na comunicação com o servidor.");
                                                                },
                                                                error: function (response) {
                                                                }
                                                            });
                                                        }
                                                    },
                                                    failure: function (response) {
                                                        alert("Falha na comunicação com o servidor.");
                                                    },
                                                    error: function (response) {
                                                    }
                                                });
                                            }

                                            else if (data2.category == 1) {
                                                document.getElementById('nameMeallunch').innerHTML = data2.name;
                                                document.getElementById('meallunchName').innerHTML = data2.name;
                                                document.getElementById('meallunchDescription').innerHTML = data2.description;
                                                document.getElementById('meallunchImage').src = "../img/refeicao/" + data2.id + ".jpg";
                                                document.getElementById('meallunchCalories').innerHTML = data2.total_Calories;
                                                document.getElementById('meallunchCarbs').innerHTML = data2.total_Carbohydrates;
                                                document.getElementById('meallunchProteins').innerHTML = data2.total_Proteins;
                                                document.getElementById('meallunchLipids').innerHTML = data2.total_Lipids;
                                                $.ajax({
                                                    method: "GET",
                                                    url: "/Meal/GetMealFoodsById/" + data2.id,
                                                    contentType: "application/json",
                                                    dataType: "json",
                                                    traditional: true,
                                                    success: function (data3) {
                                                        for (var i = 0; i < data3.length; i++) {
                                                            var food = data3[i];
                                                            $.ajax({
                                                                method: "GET",
                                                                url: "/Meal/GetFoodById/" + data3[i].foodID,
                                                                contentType: "application/json",
                                                                dataType: "json",
                                                                traditional: true,
                                                                success: function (data4) {
                                                                    var a = '<li class="dd-item" data-id="2"><div class="dd-handle"><span class="float-right">' + food.quantity + units[data4.unit] + ' </span><span>' + data4.food_Name + '</span></div></li>';
                                                                    var b = '<li>' + data4.food_Name + '<span class="float-right">' + food.quantity + units[data4.unit] + ' </span></li>';
                                                                    $("#lunchmealfoods").append(a);
                                                                    $("#meallunchfoods").append(b);
                                                                },
                                                                failure: function (response) {
                                                                    alert("Falha na comunicação com o servidor.");
                                                                },
                                                                error: function (response) {
                                                                }
                                                            });
                                                        }
                                                    },
                                                    failure: function (response) {
                                                        alert("Falha na comunicação com o servidor.");
                                                    },
                                                    error: function (response) {
                                                    }
                                                });
                                            }

                                            else if (data2.category == 2) {
                                                document.getElementById('nameMealdinner').innerHTML = data2.name;
                                                document.getElementById('mealdinnerName').innerHTML = data2.name;
                                                document.getElementById('mealdinnerDescription').innerHTML = data2.description;
                                                document.getElementById('mealdinnerImage').src = "../img/refeicao/" + data2.id + ".jpg";
                                                document.getElementById('mealdinnerCalories').innerHTML = data2.total_Calories;
                                                document.getElementById('mealdinnerCarbs').innerHTML = data2.total_Carbohydrates;
                                                document.getElementById('mealdinnerProteins').innerHTML = data2.total_Proteins;
                                                document.getElementById('mealdinnerLipids').innerHTML = data2.total_Lipids;
                                                $.ajax({
                                                    method: "GET",
                                                    url: "/Meal/GetMealFoodsById/" + data2.id,
                                                    contentType: "application/json",
                                                    dataType: "json",
                                                    traditional: true,
                                                    success: function (data3) {
                                                        for (var i = 0; i < data3.length; i++) {
                                                            var food = data3[i];
                                                            $.ajax({
                                                                method: "GET",
                                                                url: "/Meal/GetFoodById/" + data3[i].foodID,
                                                                contentType: "application/json",
                                                                dataType: "json",
                                                                traditional: true,
                                                                success: function (data4) {
                                                                    var a = '<li class="dd-item" data-id="2"><div class="dd-handle"><span class="float-right">' + food.quantity + units[data4.unit] + ' </span><span>' + data4.food_Name + '</span></div></li>';
                                                                    var b = '<li>' + data4.food_Name + '<span class="float-right">' + food.quantity + units[data4.unit] + ' </span></li>';
                                                                    $("#dinnermealfoods").append(a);
                                                                    $("#mealdinnerfoods").append(b);
                                                                },
                                                                failure: function (response) {
                                                                    alert("Falha na comunicação com o servidor.");
                                                                },
                                                                error: function (response) {
                                                                }
                                                            });
                                                        }
                                                    },
                                                    failure: function (response) {
                                                        alert("Falha na comunicação com o servidor.");
                                                    },
                                                    error: function (response) {
                                                    }
                                                });

                                            }

                                        },
                                        failure: function (response) {
                                            alert("Falha na comunicação com o servidor.");
                                        },
                                        error: function (response) {
                                        }
                                    });

                                }

                            },
                            failure: function (data2) {
                                alert("Falha na comunicação com o servidor.");
                            },
                            error: function (data2) {
                                alert(':(');
                            }
                        });
                    }
                    else if (data != null) {
                        for (var i = 0; i < data.length; i++) {
                            $.ajax({
                                method: "GET",
                                url: "/Diet/GetFoodsDataByMealId/" + data[i],
                                contentType: "application/json",
                                dataType: "json",
                                traditional: true,
                                success: function (data6) {
                                    Alcohol = Alcohol + data6.alcohol;
                                    Calories = Calories + data6.calories;
                                    Carbohydrate = Carbohydrate + data6.carbohydrate;
                                    Copper = Copper + data6.copper;
                                    Fiber = Fiber + data6.fiber;
                                    Lipid = Lipid + data6.lipid;
                                    Magnesium = Magnesium + data6.magnesium;
                                    Phosphor = Phosphor + data6.phosphor;
                                    Potassium = Potassium + data6.potassium;
                                    Protein = Protein + data6.protein;
                                    Selenium = Selenium + data6.selenium;
                                    Sodium = Sodium + data6.sodium;
                                    Vitamin_A = Vitamin_A + data6.vitamin_A;
                                    Vitamin_B12 = Vitamin_B12 + data6.vitamin_B12;
                                    Vitamin_B6 = Vitamin_B6 + data6.vitamin_B6;
                                    Vitamin_C = Vitamin_C + data6.vitamin_C;
                                    Vitamin_D = Vitamin_D + data6.vitamin_D;
                                    Vitamin_E = Vitamin_E + data6.vitamin_E;
                                    Zinc = Zinc + data6.zinc;

                                    document.getElementById("Alcohol").innerHTML = Alcohol;
                                    document.getElementById("Copper").innerHTML = Copper;
                                    document.getElementById("Fiber").innerHTML = Fiber;
                                    document.getElementById("Magnesium").innerHTML = Magnesium;
                                    document.getElementById("Phosphor").innerHTML = Phosphor;
                                    document.getElementById("Potassium").innerHTML = Potassium;
                                    document.getElementById("Selenium").innerHTML = Selenium;
                                    document.getElementById("Sodium").innerHTML = Sodium;
                                    document.getElementById("Vitamin_A").innerHTML = Vitamin_A;
                                    document.getElementById("Vitamin_B12").innerHTML = Vitamin_B12;
                                    document.getElementById("Vitamin_B6").innerHTML = Vitamin_B6;
                                    document.getElementById("Vitamin_C").innerHTML = Vitamin_C;
                                    document.getElementById("Vitamin_D").innerHTML = Vitamin_D;
                                    document.getElementById("Vitamin_E").innerHTML = Vitamin_E;
                                    document.getElementById("Zinc").innerHTML = Zinc;

                                    c3.generate({
                                        bindto: '#pie',
                                        data: {
                                            columns: [
                                                //['Calorias', 200]],
                                                ['Carboidratos', Carbohydrate],
                                                ['Proteínas', Protein],
                                                ['Gorduras', Lipid]
                                            ],
                                            colors: {
                                                //data1: '#0000FF',
                                                data2: '#f0d500',
                                                data3: '#42ccce',
                                                data4: '#eed202'
                                            },
                                            type: 'pie'
                                        }
                                    });
                                },
                                failure: function (response) {
                                    alert("Falha na comunicação com o servidor.");
                                },
                                error: function (response) {
                                    alert("Erro");
                                }
                            });
                            $.ajax({
                                method: "GET",
                                url: "/Meal/GetById/" + data[i],
                                contentType: "application/json",
                                dataType: "json",
                                traditional: true,
                                success: function (data2) {
                                    if (data2.category == 0) {
                                        document.getElementById('nameMealBreackfast').innerHTML = data2.name;
                                        document.getElementById('mealBreackfastName').innerHTML = data2.name;
                                        document.getElementById('mealBreackfastDescription').innerHTML = data2.description;
                                        document.getElementById('mealbreackfastImage').src = "../img/refeicao/" + data2.id + ".jpg";
                                        document.getElementById('mealbreackfastCalories').innerHTML = data2.total_Calories;
                                        document.getElementById('mealbreackfastCarbs').innerHTML = data2.total_Carbohydrates;
                                        document.getElementById('mealbreackfastProteins').innerHTML = data2.total_Proteins;
                                        document.getElementById('mealbreackfastLipids').innerHTML = data2.total_Lipids;
                                        $.ajax({
                                            method: "GET",
                                            url: "/Meal/GetMealFoodsById/" + data2.id,
                                            contentType: "application/json",
                                            dataType: "json",
                                            traditional: true,
                                            success: function (data3) {
                                                for (var i = 0; i < data3.length; i++) {
                                                    var food = data3[i];
                                                    $.ajax({
                                                        method: "GET",
                                                        url: "/Meal/GetFoodById/" + data3[i].foodID,
                                                        contentType: "application/json",
                                                        dataType: "json",
                                                        traditional: true,
                                                        success: function (data4) {

                                                            var a = '<li class="dd-item" data-id="2"><div class="dd-handle"><span class="float-right">' + food.quantity + units[data4.unit] + ' </span><span>' + data4.food_Name + '</span></div></li>';
                                                            var b = '<li>' + data4.food_Name + '<span class="float-right">' + food.quantity + units[data4.unit] + ' </span></li>';
                                                            $("#breackfastmealfoods").append(a);
                                                            $("#mealbrackfastfoods").append(b);
                                                        },
                                                        failure: function (response) {
                                                            alert("Falha na comunicação com o servidor.");
                                                        },
                                                        error: function (response) {
                                                        }
                                                    });
                                                }
                                            },
                                            failure: function (response) {
                                                alert("Falha na comunicação com o servidor.");
                                            },
                                            error: function (response) {
                                            }
                                        });
                                    }

                                    else if (data2.category == 1) {
                                        document.getElementById('nameMeallunch').innerHTML = data2.name;
                                        document.getElementById('meallunchName').innerHTML = data2.name;
                                        document.getElementById('meallunchDescription').innerHTML = data2.description;
                                        document.getElementById('meallunchImage').src = "../img/refeicao/" + data2.id + ".jpg";
                                        document.getElementById('meallunchCalories').innerHTML = data2.total_Calories;
                                        document.getElementById('meallunchCarbs').innerHTML = data2.total_Carbohydrates;
                                        document.getElementById('meallunchProteins').innerHTML = data2.total_Proteins;
                                        document.getElementById('meallunchLipids').innerHTML = data2.total_Lipids;
                                        $.ajax({
                                            method: "GET",
                                            url: "/Meal/GetMealFoodsById/" + data2.id,
                                            contentType: "application/json",
                                            dataType: "json",
                                            traditional: true,
                                            success: function (data3) {
                                                for (var i = 0; i < data3.length; i++) {
                                                    var food = data3[i];
                                                    $.ajax({
                                                        method: "GET",
                                                        url: "/Meal/GetFoodById/" + data3[i].foodID,
                                                        contentType: "application/json",
                                                        dataType: "json",
                                                        traditional: true,
                                                        success: function (data4) {
                                                            var a = '<li class="dd-item" data-id="2"><div class="dd-handle"><span class="float-right">' + food.quantity + units[data4.unit] + ' </span><span>' + data4.food_Name + '</span></div></li>';
                                                            var b = '<li>' + data4.food_Name + '<span class="float-right">' + food.quantity + units[data4.unit] + ' </span></li>';
                                                            $("#lunchmealfoods").append(a);
                                                            $("#meallunchfoods").append(b);
                                                        },
                                                        failure: function (response) {
                                                            alert("Falha na comunicação com o servidor.");
                                                        },
                                                        error: function (response) {
                                                        }
                                                    });
                                                }
                                            },
                                            failure: function (response) {
                                                alert("Falha na comunicação com o servidor.");
                                            },
                                            error: function (response) {
                                            }
                                        });
                                    }

                                    else if (data2.category == 2) {
                                        document.getElementById('nameMealdinner').innerHTML = data2.name;
                                        document.getElementById('mealdinnerName').innerHTML = data2.name;
                                        document.getElementById('mealdinnerDescription').innerHTML = data2.description;
                                        document.getElementById('mealdinnerImage').src = "../img/refeicao/" + data2.id + ".jpg";
                                        document.getElementById('mealdinnerCalories').innerHTML = data2.total_Calories;
                                        document.getElementById('mealdinnerCarbs').innerHTML = data2.total_Carbohydrates;
                                        document.getElementById('mealdinnerProteins').innerHTML = data2.total_Proteins;
                                        document.getElementById('mealdinnerLipids').innerHTML = data2.total_Lipids;
                                        $.ajax({
                                            method: "GET",
                                            url: "/Meal/GetMealFoodsById/" + data2.id,
                                            contentType: "application/json",
                                            dataType: "json",
                                            traditional: true,
                                            success: function (data3) {
                                                for (var i = 0; i < data3.length; i++) {
                                                    var food = data3[i];
                                                    $.ajax({
                                                        method: "GET",
                                                        url: "/Meal/GetFoodById/" + data3[i].foodID,
                                                        contentType: "application/json",
                                                        dataType: "json",
                                                        traditional: true,
                                                        success: function (data4) {
                                                            var a = '<li class="dd-item" data-id="2"><div class="dd-handle"><span class="float-right">' + food.quantity + units[data4.unit] + ' </span><span>' + data4.food_Name + '</span></div></li>';
                                                            var b = '<li>' + data4.food_Name + '<span class="float-right">' + food.quantity + units[data4.unit] + ' </span></li>';
                                                            $("#dinnermealfoods").append(a);
                                                            $("#mealdinnerfoods").append(b);
                                                        },
                                                        failure: function (response) {
                                                            alert("Falha na comunicação com o servidor.");
                                                        },
                                                        error: function (response) {
                                                        }
                                                    });
                                                }
                                            },
                                            failure: function (response) {
                                                alert("Falha na comunicação com o servidor.");
                                            },
                                            error: function (response) {
                                            }
                                        });

                                    }


                                },
                                failure: function (response) {
                                    alert("Falha na comunicação com o servidor.");
                                },
                                error: function (response) {
                                }

                            });

                        }

                    }
                },
                failure: function (response) {
                    alert("Falha na comunicação com o servidor.");
                },
                error: function (response) {
                }
            });
        });


    </script>
}
